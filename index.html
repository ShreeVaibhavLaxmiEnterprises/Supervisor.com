<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worker Bill System</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f4f4f4; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 1000px; margin: auto; }
        
        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .header h1 { margin: 0; color: #333; text-transform: uppercase; }
        .header p { margin: 5px 0; color: #666; }

        .controls { display: flex; justify-content: space-between; margin-bottom: 15px; }
        button { padding: 10px 15px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; }
        .btn-add { background-color: #28a745; color: white; }
        .btn-print { background-color: #007bff; color: white; }
        .btn-del { background-color: #dc3545; color: white; padding: 5px 10px; }

        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background-color: #333; color: white; }
        
        input { width: 90%; padding: 5px; border: 1px solid #ccc; border-radius: 4px; text-align: center; }
        input:focus { border-color: #007bff; outline: none; }
        
        .summary { display: flex; justify-content: flex-end; }
        .summary-box { width: 250px; border: 2px solid #333; padding: 15px; background: #f9f9f9; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 16px; }
        .total-final { font-weight: bold; font-size: 18px; border-top: 1px solid #999; padding-top: 5px; margin-top: 5px; }

        /* Print Settings */
        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; border: none; }
            .no-print, .btn-del { display: none !important; }
            input { border: none; background: transparent; }
            th { background-color: #ddd !important; color: black !important; -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1 contenteditable="true">SHREE VAIBHAV LAXMI ENTERPRISES</h1>
        <p>Worker Payment Sheet</p>
        <p>Date: <span id="currentDate"></span></p>
    </div>

    <div class="controls no-print">
        <button class="btn-add" onclick="addWorker()">+ Add Worker</button>
        <button class="btn-print" onclick="window.print()">Print / Save PDF</button>
    </div>

    <table id="billTable">
        <thead>
            <tr>
                <th style="width: 5%;">SN</th>
                <th style="width: 35%;">Worker Name</th>
                <th style="width: 15%;">Rate (₹)</th>
                <th style="width: 10%;">Days</th>
                <th style="width: 15%;">Total</th>
                <th style="width: 15%;">Advance</th>
                <th style="width: 15%;">Balance</th>
                <th class="no-print">Action</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>

    <div class="summary">
        <div class="summary-box">
            <div class="summary-row">
                <span>Total Amount:</span>
                <span id="sumTotal">₹0</span>
            </div>
            <div class="summary-row">
                <span>Total Advance:</span>
                <span id="sumAdvance">₹0</span>
            </div>
            <div class="summary-row total-final">
                <span>Net Payable:</span>
                <span id="netPayable">₹0</span>
            </div>
        </div>
    </div>
</div>

<script>
    // Set Current Date
    document.getElementById('currentDate').innerText = new Date().toLocaleDateString('en-IN');

    function addWorker() {
        const table = document.getElementById('billTable').getElementsByTagName('tbody')[0];
        const rowCount = table.rows.length + 1;
        const row = table.insertRow();

        row.innerHTML = `
            <td>${rowCount}</td>
            <td><input type="text" placeholder="Name"></td>
            <td><input type="number" class="rate" oninput="calculate()" placeholder="0"></td>
            <td><input type="number" class="days" oninput="calculate()" placeholder="0"></td>
            <td><input type="text" class="total" readonly value="0" style="background:#eee;"></td>
            <td><input type="number" class="advance" oninput="calculate()" placeholder="0"></td>
            <td><input type="text" class="balance" readonly value="0" style="font-weight:bold;"></td>
            <td class="no-print"><button class="btn-del" onclick="deleteRow(this)">X</button></td>
        `;
    }

    function deleteRow(btn) {
        const row = btn.parentNode.parentNode;
        row.parentNode.removeChild(row);
        calculate(); // Recalculate after delete
        renumberRows();
    }

    function renumberRows() {
        const table = document.getElementById('billTable').getElementsByTagName('tbody')[0];
        for (let i = 0; i < table.rows.length; i++) {
            table.rows[i].cells[0].innerText = i + 1;
        }
    }

    function calculate() {
        const rows = document.querySelectorAll('#billTable tbody tr');
        let grandTotalAmount = 0;
        let grandTotalAdvance = 0;
        let grandNetPayable = 0;

        rows.forEach(row => {
            const rate = parseFloat(row.querySelector('.rate').value) || 0;
            const days = parseFloat(row.querySelector('.days').value) || 0;
            const advance = parseFloat(row.querySelector('.advance').value) || 0;

            // Row Calculation
            const total = rate * days;
            const balance = total - advance;

            // Update Row Inputs
            row.querySelector('.total').value = total.toFixed(0);
            row.querySelector('.balance').value = balance.toFixed(0);

            // Accumulate Grand Totals
            grandTotalAmount += total;
            grandTotalAdvance += advance;
            grandNetPayable += balance;
        });

        // Update Summary Box
        document.getElementById('sumTotal').innerText = "₹" + grandTotalAmount.toLocaleString('en-IN');
        document.getElementById('sumAdvance').innerText = "₹" + grandTotalAdvance.toLocaleString('en-IN');
        document.getElementById('netPayable').innerText = "₹" + grandNetPayable.toLocaleString('en-IN');
    }

    // Add 1 default row on load
    addWorker();
</script>

</body>
</html>
